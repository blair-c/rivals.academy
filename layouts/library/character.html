{{ define "header" }}
  {{ partial "navbar" }}
{{ end }}

{{ define "main" }}
<div class="center"><div class="cols-sidebar-content">
  <div class="sidebar">
    <nav><ul class="library-grid">
    {{ range (slice "zetterburn" "orcane" "kragg" "wrastor" 
                    "forsburn" "etalus" "maypul" "absa"
                    "clairen" "ranno" "sylvanos" "elliana"
                    "mollo" "hodan" "olympia" "pomme"
                    "ori" "shovel-knight") }}
      <li><a href="/library/{{ . }}" title="{{ humanize . | title }}">
        <div>
          <img src="/img/icons-full/{{ . }}.png" aria-hidden="true">
          <span class="sr-only">{{ humanize . | title }}</span>
        </div>
      </a></li>
    {{ end }}
    {{/*  <li><a href="/library/stages" title="Stages">
      <div>
        <img src="/img/icons-full/stages.png" aria-hidden="true">
        <span class="sr-only">Stages</span>
      </div>
    </a></li>  */}}
    <li><a><div></div></a></li>
    <li><a><div></div></a></li>
    </ul></nav>
    <div class="toc">
      {{ .TableOfContents }}
      <a href="#" class="to-top" title="Jump to Top">
        {{ partial "svg/up.svg" }}<span class="sr-only">Jump to Top</span>
      </a>
    </div>
  </div>
  <main id="main-content">
    <article class="padded-content">
      {{ $c := index .Site.Data.rivals .File.BaseFileName }}
      <h1>{{ $c.name }}</h1>

      {{ .RenderString "### Effective Weight" }}
      <div class="library-table no-col-borders">
        <table>
          <thead>
            <tr>
              <th>Knockback Adjust</th>
              <th>Gravity Accel</th>
              <th>Hitstun Gravity Accel</th>
              <th>Air Friction</th>
              <th>Air Accel</th>
              <th>Max Fall Speed</th>
              <th>Fastfall Speed</th>
              <th>Jumpsquat</th>
              <th>Land Time</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{ printf "%.2f" $c.knockbackAdjustment }}</td>
              <td>{{ printf "%.2f" $c.gravityAccel }}</td>
              <td>{{ printf "%.2f" $c.hitstunGravityAccel }}</td>
              <td>{{ printf "%.2f" $c.airFriction }}</td>
              <td>{{ printf "%.2f" $c.airAccel }}</td>
              <td>{{ $c.maxFallSpeed }}</td>
              <td>{{ $c.fastfallSpeed }}</td>
              <td>{{ $c.jumpsquat }}</td>
              <td>{{ $c.landTime }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      {{ .RenderString "### Grounded Movement" }}
      <div class="library-table no-col-borders">
        <table>
          <thead>
            <tr>
              <th>Ground Friction</th>
              <th>Dash Speed</th>
              <th>Dash Time  </th>
              <th>Run Speed</th>
              <th>Run Stop Time</th>
              <th>Run Turn Time</th>
              <th>Run Turn Accel</th>
              <th>Walk Speed</th>
              <th>Walk Accel</th>
              <th>Walk Turn Time</th>
              <th>Waveland Time</th>
              <th>Waveland Friction</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{ printf "%.2f" $c.groundFriction }}</td>
              <td>{{ printf "%.2f" $c.initialDash.speed }}</td>
              <td>{{ $c.initialDash.time }}</td>
              <td>{{ printf "%.2f" $c.run.speed }}</td>
              <td>{{ $c.run.stop.time }}</td>
              <td>{{ $c.run.turn.time }}</td>
              <td>{{ printf "%.2f" $c.run.turn.accel }}</td>
              <td>{{ printf "%.2f" $c.walk.speed }}</td>
              <td>{{ printf "%.2f" $c.walk.accel }}</td>
              <td>{{ $c.walk.turn.time }}</td>
              <td>{{ $c.waveland.time }}</td>
              <td>{{ printf "%.2f" $c.waveland.friction }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      {{ .RenderString "### Aerial Movement" }}
      <div class="library-table no-col-borders">
        <table>
          <thead>
            <tr>
              <th>Max Air Speed</th>
              <th>Max Jump Horizontal Speed</th>
              <th>Fullhop Speed</th>
              <th>Shorthop Speed</th>
              <th>Double Jump Speed</th>
              {{ with $c.doubleJump.accel }}<th>Double Jump Accel</th>{{ end }}
              {{ with $c.tripleJump.speed }}<th>Triple Jump Speed</th>{{ end }}
              <th>Walljump Vertical Speed</th>
              <th>Walljump Horizontal Speed</th>
              {{ with $c.wallcling.max }}<th>Wallcling Max</th>{{ end }}
              <th>Pratfall Accel</th>
              <th>Pratfall Land Time</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{ printf "%.1f" $c.maxAirSpeed }}</td>
              <td>{{ $c.maxJumpHorizontalSpeed }}</td>
              <td>{{ printf "%.2f" $c.fullhop.speed }}</td>
              <td>{{ printf "%.1f" $c.shorthop.speed }}</td>
              <td>{{ printf "%.2f" $c.doubleJump.speed }}</td>
              {{ with $c.doubleJump.accel }}<td>{{ . }}</td>{{ end }}
              {{ with $c.tripleJump.speed }}<td>{{ printf "%.2f" $c.tripleJump.speed }}</td>{{ end }}
              <td>{{ $c.walljump.speed.vertical }}</td>
              <td>{{ $c.walljump.speed.horizontal }}</td>
              {{ with $c.wallcling.max }}<td>{{ . }}</td>{{ end }}
              <td>{{ printf "%.2f" $c.pratfall.accel }}</td>
              <td>{{ $c.pratfall.landTime }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      {{ .RenderString "### Hurtbox" }}
      <div class="library-table">
        <table>
          <thead>
            <tr>
              <th>Idle</th>
              <th>Crouch</th>
              <th>Hitstun</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{ $c.hurtbox.idle.width }} × {{ $c.hurtbox.idle.height }}</td>
              <td>{{ $c.hurtbox.crouch.width }} × {{ $c.hurtbox.crouch.height }}</td>
              <td>{{ $c.hurtbox.hitstun.width }} × {{ $c.hurtbox.hitstun.height }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="hitbox-image">
        <img src="{{ $c.hurtbox.image.highRes }}" alt="In-game screenshot of {{ $c.name }}'s hurtbox during idle, crouch, and hitstun.">
      </div>

      {{ range slice
        (dict
          "section" "Normal"
          "attacks" (slice "jab" "dashAttack" "forwardTilt" "upTilt" "downTilt"))
        (dict
          "section" "Aerial"
          "attacks" (slice "neutralAir" "forwardAir" "backAir" "upAir" "downAir"))
        (dict
          "section" "Strong"
          "attacks" (slice "forwardStrong" "upStrong" "downStrong"))
        (dict
          "section" "Special"
          "attacks" (slice "neutralSpecial" "sideSpecial" "upSpecial" "downSpecial"))
      }}
        {{ $.RenderString (print "## " .section " Attacks") }}
        {{ range .attacks }}
          {{ $attack := replace (lower (humanize .)) " " "-" }}
          {{ $.RenderString (print "### " (humanize . | title)) }}
          {{ $move := index $c . }}
          {{ range $move }}
            {{ if isset . "name" }}
              <h4 id="{{ $attack }}-{{ replaceRE "[ -:()]+" "-" (lower .name) }}">
                {{ .name }}{{ with .cost }} ({{ . }} Gems){{ end }}
              </h4>
            {{ end }}
            {{ partial "partials/move-display.html" . }}
          {{ end }}
        {{ end }}
      {{ end }}

      {{ with index $c "taunt" }}
        {{ $.RenderString "### Taunt" }}
        {{ with .name }}<h4 id="taunt-{{ replace (lower .) " " "-" }}">{{ . }}</h4>{{ end }}
        {{ partial "partials/move-display.html" . }}
      {{ end }}
    </article>
    {{ partial "partials/library-footer.html" . }}
  </main>
</div></div>
{{ end }}

{{ define "footer" }}
  {{ partial "footer" }}
{{ end }}