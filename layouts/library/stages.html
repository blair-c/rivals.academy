{{ define "header" }}
  {{ partial "navbar" }}
{{ end }}

{{ define "main" }}
<div class="center"><div class="cols-sidebar-content">
  <div class="sidebar">
    <nav><ul class="library-grid">
    {{ range (slice "zetterburn" "orcane" "kragg" "wrastor" 
                    "forsburn" "etalus" "maypul" "absa"
                    "clairen" "ranno" "sylvanos" "elliana"
                    "mollo" "hodan" "olympia" "pomme"
                    "ori" "shovel-knight") }}
      <li><a href="/library/{{ . }}" title="{{ humanize . | title }}">
        <div>
          <img src="/img/icons/{{ . }}.png" aria-hidden="true">
          <span class="sr-only">{{ humanize . | title }}</span>
        </div>
      </a></li>
    {{ end }}
    <li><a href="/library/stages" title="Stages">
      <div>
        <img src="/img/icons/stages.png" aria-hidden="true">
        <span class="sr-only">Stages</span>
      </div>
    </a></li>
    <li><div></div></li>
    </ul></nav>
    <div class="toc">
      {{ .TableOfContents }}
      <a href="#" class="to-top" title="{{ T "jump-to-top" }}">
        {{ partial "svg/up.svg" }}<span class="sr-only">{{ T "jump-to-top" }}</span>
      </a>
    </div>
  </div>
  <main id="main-content">
    <article class="padded-content library-article">
      {{ $s := .Site.Data.rivals.stages }}
      <div class="article-header">
        <h1>{{ T "stages" | title }}</h1>
        {{ partial "language-picker" . }}
      </div>

      {{ $all := merge $s (dict "treetopLodgeD" $s.treetopLodge.doubles "forestFloorD" $s.forestFloor.doubles) }}
      {{ $all = sort $all }}
      {{ .RenderString (print "### " (T "stage-width")) }}
      <div class="library-table stages"><table>
        <thead><tr>
          {{ range sort $all "stageWidth" }}
            <th>
              <a href="#{{ anchorize .name }}" title="{{ .name }}">
                <img src="{{ .icon }}" alt="{{ .name }}">
              </a>
            </th>
          {{ end }}
        </tr></thead>
        <tbody><tr>
          {{ range sort $all "stageWidth" }}<td>{{ .stageWidth }}</td>{{ end }}
        </tr></tbody>
      </table></div>
      <p class="move-notes">{{ T "stage-width-desc" }}</p>
      {{ .RenderString (print "### " (T "top-blastzone")) }}
      <div class="library-table stages"><table>
        <thead><tr>
          {{ range sort $all "blastzones.top" }}
            <th>
              <a href="#{{ anchorize .name }}" title="{{ .name }}">
                <img src="{{ .icon }}" alt="{{ .name }}">
              </a>
            </th>
          {{ end }}
        </tr></thead>
        <tbody><tr>
          {{ range sort $all "blastzones.top" }}<td>{{ .blastzones.top }}</td>{{ end }}
        </tr></tbody>
      </table></div>
      <p class="move-notes">{{ T "top-blastzone-desc" }}</p>
      {{ .RenderString (print "### " (T "side-blastzones")) }}
      <div class="library-table stages"><table>
        <thead><tr>
          {{ range sort $all "blastzones.side" }}
            <th>
              <a href="#{{ anchorize .name }}" title="{{ .name }}">
                <img src="{{ .icon }}" alt="{{ .name }}">
              </a>
            </th>
          {{ end }}
        </tr></thead>
        <tbody><tr>
          {{ range sort $all "blastzones.side" }}<td>{{ .blastzones.side }}</td>{{ end }}
        </tr></tbody>
      </table></div>
      <p class="move-notes">{{ T "side-blastzones-desc" }}</p>
      {{ .RenderString (print "### " (T "bottom-blastzone")) }}
      <div class="library-table stages"><table>
        <thead><tr>
          {{ range sort $all "blastzones.bottom" }}
            <th>
              <a href="#{{ anchorize .name }}" title="{{ .name }}">
                <img src="{{ .icon }}" alt="{{ .name }}">
              </a>
            </th>
          {{ end }}
        </tr></thead>
        <tbody><tr>
          {{ range sort $all "blastzones.bottom" }}<td>{{ .blastzones.bottom }}</td>{{ end }}
        </tr></tbody>
      </table></div>
      <p class="move-notes">{{ T "bottom-blastzone-desc" }}</p>

      {{ .RenderString (print "## " (T "stage-details")) }}
      {{ $h := slice }}{{ $w := slice }}{{ $p := slice }}
      {{ range (slice $s.fireCapital $s.airArmada $s.rockWall $s.merchantPort
                      $s.treetopLodge $s.blazingHideout $s.tempestPeak $s.frozenFortress
                      $s.towerOfHeaven $s.aetherealGates $s.endlessAbyss $s.spiritTree
                      $s.forestFloor $s.julesvale $s.troupplePond) }}
        {{ $.RenderString (print "### " .name) }}
        <div class="library-table"><table>
          <thead><tr>
            <th>{{ T "stage-width" }}</th>
            {{ with .stageDepth }}<th>{{ T "stage-depth" }}</th>{{ end }}
            <th>{{ T "top-blastzone" }}</th>
            <th>{{ T "side-blastzones" }}</th>
            <th>{{ T "bottom-blastzone" }}</th>
            {{ with .platforms }}
              {{ if gt (len .) 1 }}
                <th>{{ T "platform-heights" }}</th>
                <th>{{ T "platform-widths" }}</th>
                <th>{{ T "platform-positions" }}</th>
              {{ else }}
                <th>{{ T "platform-height" }}</th>
                <th>{{ T "platform-width" }}</th>
                <th>{{ T "platform-position" }}</th>
              {{ end }}
            {{ end }}
            <th>{{ T "camera-offset" }}</th>
          </tr></thead>
          <tbody><tr>
            <td>
              {{ .stageWidth }}
              ({{ if gt .stageWidth 890 }}{{ T "largest" }}
              {{- else if lt .stageWidth 520 }}{{ T "smallest" }}
              {{- else if gt .stageWidth 760 }}{{ T "large" }}
              {{- else if lt .stageWidth 580 }}{{ T "small" }}
              {{- else }}{{ T "average" }}
              {{- end }})
            </td>
            {{ with .stageDepth }}<td>{{ . }} ({{ T "unique" }})</td>{{ end }}
            <td>
              {{ .blastzones.top }}
              ({{ if gt .blastzones.top 620 }}{{ T "largest" }}
              {{- else if lt .blastzones.top 560 }}{{ T "smallest" }}
              {{- else if gt .blastzones.top 610 }}{{ T "large" }}
              {{- else if lt .blastzones.top 575 }}{{ T "small" }}
              {{- else }}{{ T "average" }}
              {{- end }})
            </td>
            <td>
              {{ .blastzones.side }}
              ({{ if gt .blastzones.side 530 }}{{ T "largest" }}
              {{- else if lt .blastzones.side 360 }}{{ T "smallest" }}
              {{- else if gt .blastzones.side 480 }}{{ T "large" }}
              {{- else if lt .blastzones.side 400 }}{{ T "small" }}
              {{- else }}{{ T "average" }}
              {{- end }})
            </td>
            <td>
              {{ .blastzones.bottom }}
              ({{ if gt .blastzones.bottom 430 }}{{ T "largest" }}
              {{- else if lt .blastzones.bottom 370 }}{{ T "smallest" }}
              {{- else if gt .blastzones.bottom 410 }}{{ T "large" }}
              {{- else if lt .blastzones.bottom 390 }}{{ T "small" }}
              {{- else }}{{ T "average" }}
              {{- end }})
            </td>
            {{ with .platforms }}
              {{ range . }}{{ $h = $h | append .height }}{{ end }}
              <td>{{ delimit $h " / " }}</td>{{ $h = slice }}
              {{ range . }}{{ $w = $w | append .width }}{{ end }}
              <td>{{ delimit $w " / " }}</td>{{ $w = slice }}
              {{ range . }}
                {{ if reflect.IsMap .pos }}
                  {{ $p = $p | append (print .pos.min "-" .pos.max) }}
                {{ else }}
                  {{ $p = $p | append .pos }}
                {{ end }}
              {{ end }}
              <td>{{ delimit $p ", " }}</td>{{ $p = slice }}
            {{ end }}
            <td>{{ .cameraOffset }}</td>{{ with .movingCamera }}<td>True</td>{{ end }}
          </tr></tbody>
        </table></div>
        <div class="stage-image" tabindex="0">
          <img src="{{ index .image.baseRes 0 }}" alt="{{ .name }}">
          <img src="{{ index .image.baseRes 1 }}" alt="{{ .name }}">
        </div>
        {{ with .doubles }}
          <h4 id="{{ anchorize .name }}">Doubles Variant</h4>
          <div class="library-table"><table>
            <thead><tr>
              <th>{{ T "stage-width" }}</th>
              {{ with .stageDepth }}<th>{{ T "stage-depth" }}</th>{{ end }}
              <th>{{ T "top-blastzone" }}</th>
              <th>{{ T "side-blastzones" }}</th>
              <th>{{ T "bottom-blastzone" }}</th>
              {{ with .platforms }}
                {{ if gt (len .) 1 }}
                  <th>{{ T "platform-heights" }}</th>
                  <th>{{ T "platform-widths" }}</th>
                  <th>{{ T "platform-positions" }}</th>
                {{ else }}
                  <th>{{ T "platform-height" }}</th>
                  <th>{{ T "platform-width" }}</th>
                  <th>{{ T "platform-position" }}</th>
                {{ end }}
              {{ end }}
              <th>{{ T "camera-offset" }}</th>
            </tr></thead>
            <tbody><tr>
              <td>
                {{ .stageWidth }}
                ({{ if gt .stageWidth 890 }}{{ T "largest" }}
                {{- else if lt .stageWidth 520 }}{{ T "smallest" }}
                {{- else if gt .stageWidth 760 }}{{ T "large" }}
                {{- else if lt .stageWidth 580 }}{{ T "small" }}
                {{- else }}{{ T "average" }}
                {{- end }})
              </td>
              <td>
                {{ .blastzones.top }}
                ({{ if gt .blastzones.top 620 }}{{ T "largest" }}
                {{- else if lt .blastzones.top 560 }}{{ T "smallest" }}
                {{- else if gt .blastzones.top 610 }}{{ T "large" }}
                {{- else if lt .blastzones.top 575 }}{{ T "small" }}
                {{- else }}{{ T "average" }}
                {{- end }})
              </td>
              <td>
                {{ .blastzones.side }}
                ({{ if gt .blastzones.side 530 }}{{ T "largest" }}
                {{- else if lt .blastzones.side 360 }}{{ T "smallest" }}
                {{- else if gt .blastzones.side 480 }}{{ T "large" }}
                {{- else if lt .blastzones.side 400 }}{{ T "small" }}
                {{- else }}{{ T "average" }}
                {{- end }})
              </td>
              <td>
                {{ .blastzones.bottom }}
                ({{ if gt .blastzones.bottom 430 }}{{ T "largest" }}
                {{- else if lt .blastzones.bottom 370 }}{{ T "smallest" }}
                {{- else if gt .blastzones.bottom 410 }}{{ T "large" }}
                {{- else if lt .blastzones.bottom 390 }}{{ T "small" }}
                {{- else }}{{ T "average" }}
                {{- end }})
              </td>
              {{ with .platforms }}
                {{ range . }}{{ $h = $h | append .height }}{{ end }}
                <td>{{ delimit $h " / " }}</td>{{ $h = slice }}
                {{ range . }}{{ $w = $w | append .width }}{{ end }}
                <td>{{ delimit $w " / " }}</td>{{ $w = slice }}
                {{ range . }}{{ $p = $p | append .pos }}{{ end }}
                <td>{{ delimit $p ", " }}</td>{{ $p = slice }}
              {{ end }}
              <td>{{ .cameraOffset }}</td>{{ with .movingCamera }}<td>True</td>{{ end }}
            </tr></tbody>
          </table></div>
          <div class="stage-image" tabindex="0">
            <img src="{{ index .image.baseRes 0 }}" alt="{{ .name }}">
            <img src="{{ index .image.baseRes 1 }}" alt="{{ .name }}">
          </div>
        {{ end }}
      {{ end }}
      
    </article>
    <div class="article-footer-divider"></div>
    <section class="article-footer">
      {{ $u := site.Data.library }}
      <p>
        {{ if eq site.Language.Lang "en" }}
          Data curated by the <a target="_blank" rel="noopener noreferrer" href="{{ site.Data.links.s7g.twitter }}">Sector 7-G</a> team:
        {{ else if eq site.Language.Lang "es" }}
          Datos recopilados por el equipo del <a target="_blank" rel="noopener noreferrer" href="{{ site.Data.links.s7g.twitter }}">Sector 7-G</a>:
        {{ end }}
        SNC, Blair, Menace13, IGL, {{ T "and" }} Jade
        ‣<br>
        {{ T "up-to-date-as-of" }} <a target="_blank" rel="noopener noreferrer" href="{{ $u.patchNotes }}">Patch {{ $u.patch }}</a>
      </p>
      <p>
        {{ partial "partials/svg/code.svg" }}
        {{ T "for-developers" }}:
        {{ $link := "" }}{{ $file := "" }}
        {{ range .AllTranslations }}{{ if eq .Language.Lang "en" }}
          {{ $link = .Permalink }}{{ $file = .File.BaseFileName }}
        {{ end }}{{ end }}
        <a target="_blank" rel="noopener noreferrer" href="{{ $link }}data.json">
          {{ T "raw-data-of-this-page" }}</a> |
        <a target="_blank" rel="noopener noreferrer" href="https://github.com/blair-c/rivals.academy/blob/main/data/rivals/{{ $file }}.yaml">
          YAML {{ T "source" }}</a> |
        <a href="/library/docs">API {{ T "docs" }}</a>
      </p>
    </section>
  </main>
</div></div>
{{ end }}

{{ define "footer" }}
  {{ partial "footer" }}
{{ end }}